# Math Insight Map

**高校数学の理解地図** — 単元ごとの「どの概念がどこまで理解されているか」をグラフで可視化する、個人講師・塾講師向けの指導支援ツールです。

ノード（学習項目）ごとに理解度（0〜4）とメモを記録でき、前提関係（prerequisites）に沿ってグラフを表示します。どこが弱いか・何から指導すべきかが一目で分かり、データは端末内（localStorage）にのみ保存されるため、そのまま教室や自宅のPCで安全に利用できます。

## 技術スタック

- React + TypeScript + Vite
- React Flow（グラフ描画）
- localStorage（Phase 1 永続化）

## 開発

```bash
npm install
npm run dev
```

ビルド: `npm run build`

## 5分で使える使い方ガイド

1. **起動**  
   `npm run dev` で起動し、表示されたURL（例: http://localhost:5173）をブラウザで開く。

2. **生徒を選ぶ**  
   最初の画面（生徒一覧）で、既存の生徒名をクリックする。まだいなければ「新規生徒を追加」から名前を入力して「追加」を押すと、その生徒の理解地図へ進む。

3. **理解地図を見る**  
   グラフの1つ1つが学習項目（ノード）、矢印が「前提関係」（この後に学ぶとよい順）を表す。  
   ノードの色は理解度の目安：**赤**＝未学習〜見たことがある、**黄**＝誘導ありでできる、**緑**＝一人で解ける〜説明できる。

4. **理解度・メモを記録する**  
   ノードをクリックすると右側にパネルが開く。「理解度」を0〜4から選び、必要なら「メモ」を入力する。変更はその場で反映され、**自動で端末内に保存**される（再読み込みしても残る）。

5. **指導のヒントを使う**  
   パネル下部の「指導提案」には、そのノードの前提のうち理解度が低いものが表示される。ボトルネック（複数の先のノードが依存している弱い箇所）は画面上部にも表示される。単元はヘッダのドロップダウンで切り替え可能。

---

## プライバシーについて

本アプリ（Math Insight Map）は、学習指導を支援する目的で、生徒の理解状況に関する情報を取り扱います。

### 取得・保存される情報

* 生徒を識別するための **任意の表示名またはID**
* 単元ごとの **理解度（0〜4）**
* 指導上の **任意のメモ**

※ 本名や連絡先など、個人を直接特定する情報の入力は想定していません。

### データの保存方法

* 入力されたデータは **利用者の端末内（localStorage 等）にのみ保存**されます。
* 本アプリは、入力された情報を **外部サーバーへ送信しません**。

### 第三者提供について

* 本アプリが取得したデータを、開発者または第三者が取得・閲覧・利用することはありません。

### 利用上の注意

* 本アプリは講師自身の管理下で使用することを前提としています。
* メモ欄には、学習指導に不要な個人情報（健康状態、家庭事情等）を記載しないことを推奨します。

---

## 免責事項

本アプリは現状「ローカル利用」を前提としたツールです。
クラウド保存や共有機能を追加する場合は、別途プライバシーポリシーの整備が必要となります。

---

## 実装済みの主な機能

- **理解地図**: 単元ごとの有向グラフ表示（prerequisites → エッジ）。ノード色は理解度で変化（赤→黄→緑）。
- **生徒管理**: 生徒一覧・新規追加。1 生徒ごとに単元別の理解度・メモを localStorage に保存。
- **単元**: 組み込み（二次関数・平方根・三角比）＋ カスタムテンプレートの追加・編集・エクスポート。
- **ノード詳細**: ノードクリックで右パネルに理解度（0〜4）・メモ・最終確認日を表示・編集。変更は即時反映・自動保存。
- **指導支援**: ボトルネック表示（複数ノードが依存する弱い箇所）、選択ノードの「指導提案」（前提のうち理解度が低い順）。

## 理解度スケール

| 値 | 意味             |
|----|------------------|
| 0  | 未学習           |
| 1  | 見たことがある   |
| 2  | 誘導ありでできる |
| 3  | 一人で解ける     |
| 4  | 説明できる       |

## 動作確認チェックリスト

- [x] 組み込み単元のノードがすべて表示され、依存関係が矢印で分かる
- [x] 理解度を変更するとノード色が即座に変わる
- [x] ページを更新しても生徒・理解度・メモが保持される
- [x] 複数生徒の追加・切り替えができる
- [x] 単元の切り替えで別単元の理解地図が表示される
- [x] ボトルネック・指導提案が表示される
- [x] 単元テンプレートのコピー・編集・エクスポートができる

## 今後の拡張候補

- クラウド保存・共有、認証（複数講師対応）
- データのバックアップ／インポート（JSON 一括）
- テンプレートのインポート・他単元の組み込み追加

---

**Privacy (EN):** This application does not collect or transmit any personal data externally. All data is stored locally on the user's device.
